<!DOCTYPE html> 
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width" , initial-scale="1">
        <title>money-mate</title>
    </head> 
    <body>
        <div class="title" id="title" ></div>
        <div id="table" class="table"></div>
    </body>
      <script src="./components/TableRow.js"> </script> 
      <script src="./data.js"></script>
</html>

<script>
    const titleElement = document.getElementById('title')
    const date = new Date()
    titleElement.innerText = `${date.getFullYear()}년 ${date.getMonth() + 1}월 머니메이트 랭킹`

    const userList = {}

    Object.entries(userData).filter(([key,_]) => key.startsWith(`${date.getFullYear()}.${date.getMonth()+1}`))
        .map(([_, dayData]) => {
        for([key, value] of Object.entries(dayData)) {
            if(!userList[key]){
                userList[key] = {
                    point: value,
                    victoryDay: value === 3 ? 1 : 0
                }
            }else{
                userList[key].point += value
                userList[key].victoryDay += value === 3 ? 1 : 0
            }
        }
    })


    const table = document.getElementById('table')
    let index = 1;

    for([name, value] of Object.entries(userList).sort( ([,a], [,b]) => b.point - a.point )){
        const tableRow = document.createElement('table-row')
        tableRow.setAttribute('number', index++)
        tableRow.setAttribute('image', image[name] || 'blank.png')
        tableRow.setAttribute('name', name)
        tableRow.setAttribute('point', value.point)
        tableRow.setAttribute('victoryDay', value.victoryDay)
        table.appendChild(tableRow)
    }

</script>

<style>
    body {
        background-color: #D3C0D3;
        padding-left: 6px;
        padding-right: 6px;
        text-align: center;
    }
    .title{
        font-size: 18px;
        margin: 16px;
        color: #2B2B2B;
    }
    .table{
        background-color: white;
        border-radius: 4px;
        padding-top: 15px;
    }
    span {
        display: inline-block;
        vertical-align: middle;
    }
</style>